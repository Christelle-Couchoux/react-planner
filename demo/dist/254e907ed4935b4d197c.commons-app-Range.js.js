"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[96],{3178:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return a(t,e),t},u=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(7378)),d=n(1345),h=n(6860),l=["ArrowRight","ArrowUp","k","PageUp"],f=["ArrowLeft","ArrowDown","j","PageDown"],p=function(e){function t(t){var n=e.call(this,t)||this;if(n.trackRef=c.createRef(),n.thumbRefs=[],n.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(n.props.values.length).fill(0).map((function(e,t){return t})),isChanged:!1,markOffsets:[]},n.getOffsets=function(){var e=n.props,t=e.direction,r=e.values,o=e.min,s=e.max,a=n.trackRef.current,i=a.getBoundingClientRect(),u=(0,d.getPaddingAndBorder)(a);return n.getThumbs().map((function(e,n){var a={x:0,y:0},c=e.getBoundingClientRect(),l=(0,d.getMargin)(e);switch(t){case h.Direction.Right:return a.x=-1*(l.left+u.left),a.y=-1*((c.height-i.height)/2+u.top),a.x+=i.width*(0,d.relativeValue)(r[n],o,s)-c.width/2,a;case h.Direction.Left:return a.x=-1*(l.right+u.right),a.y=-1*((c.height-i.height)/2+u.top),a.x+=i.width-i.width*(0,d.relativeValue)(r[n],o,s)-c.width/2,a;case h.Direction.Up:return a.x=-1*((c.width-i.width)/2+l.left+u.left),a.y=-u.left,a.y+=i.height-i.height*(0,d.relativeValue)(r[n],o,s)-c.height/2,a;case h.Direction.Down:return a.x=-1*((c.width-i.width)/2+l.left+u.left),a.y=-u.left,a.y+=i.height*(0,d.relativeValue)(r[n],o,s)-c.height/2,a;default:return(0,d.assertUnreachable)(t)}}))},n.getThumbs=function(){return n.trackRef&&n.trackRef.current?Array.from(n.trackRef.current.children).filter((function(e){return e.hasAttribute("aria-valuenow")})):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},n.getTargetIndex=function(e){return n.getThumbs().findIndex((function(t){return t===e.target||t.contains(e.target)}))},n.addTouchEvents=function(e){document.addEventListener("touchmove",n.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",n.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",n.schdOnEnd,{passive:!1})},n.addMouseEvents=function(e){document.addEventListener("mousemove",n.schdOnMouseMove),document.addEventListener("mouseup",n.schdOnEnd)},n.onMouseDownTrack=function(e){var t;if(0===e.button)if(e.persist(),e.preventDefault(),n.addMouseEvents(e.nativeEvent),n.props.values.length>1&&n.props.draggableTrack){if(n.thumbRefs.some((function(t){var n;return null===(n=t.current)||void 0===n?void 0:n.contains(e.target)})))return;n.setState({draggedTrackPos:[e.clientX,e.clientY]},(function(){return n.onMove(e.clientX,e.clientY)}))}else{var r=(0,d.getClosestThumbIndex)(n.thumbRefs.map((function(e){return e.current})),e.clientX,e.clientY,n.props.direction);null===(t=n.thumbRefs[r].current)||void 0===t||t.focus(),n.setState({draggedThumbIndex:r},(function(){return n.onMove(e.clientX,e.clientY)}))}},n.onResize=function(){(0,d.translateThumbs)(n.getThumbs(),n.getOffsets(),n.props.rtl),n.calculateMarkOffsets()},n.onTouchStartTrack=function(e){var t;if(e.persist(),n.addTouchEvents(e.nativeEvent),n.props.values.length>1&&n.props.draggableTrack){if(n.thumbRefs.some((function(t){var n;return null===(n=t.current)||void 0===n?void 0:n.contains(e.target)})))return;n.setState({draggedTrackPos:[e.touches[0].clientX,e.touches[0].clientY]},(function(){return n.onMove(e.touches[0].clientX,e.touches[0].clientY)}))}else{var r=(0,d.getClosestThumbIndex)(n.thumbRefs.map((function(e){return e.current})),e.touches[0].clientX,e.touches[0].clientY,n.props.direction);null===(t=n.thumbRefs[r].current)||void 0===t||t.focus(),n.setState({draggedThumbIndex:r},(function(){return n.onMove(e.touches[0].clientX,e.touches[0].clientY)}))}},n.onMouseOrTouchStart=function(e){if(!n.props.disabled){var t=(0,d.isTouchEvent)(e);if(t||0===e.button){var r=n.getTargetIndex(e);-1!==r&&(t?n.addTouchEvents(e):n.addMouseEvents(e),n.setState({draggedThumbIndex:r,thumbZIndexes:n.state.thumbZIndexes.map((function(e,t){return t===r?Math.max.apply(Math,n.state.thumbZIndexes):e<=n.state.thumbZIndexes[r]?e:e-1}))}))}}},n.onMouseMove=function(e){e.preventDefault(),n.onMove(e.clientX,e.clientY)},n.onTouchMove=function(e){e.preventDefault(),n.onMove(e.touches[0].clientX,e.touches[0].clientY)},n.onKeyDown=function(e){var t=n.props,r=t.values,o=t.onChange,s=t.step,a=t.rtl,i=t.direction,u=n.state.isChanged,c=n.getTargetIndex(e.nativeEvent),p=a||i===h.Direction.Left||i===h.Direction.Down?-1:1;-1!==c&&(l.includes(e.key)?(e.preventDefault(),n.setState({draggedThumbIndex:c,isChanged:!0}),o((0,d.replaceAt)(r,c,n.normalizeValue(r[c]+p*("PageUp"===e.key?10*s:s),c)))):f.includes(e.key)?(e.preventDefault(),n.setState({draggedThumbIndex:c,isChanged:!0}),o((0,d.replaceAt)(r,c,n.normalizeValue(r[c]-p*("PageDown"===e.key?10*s:s),c)))):"Tab"===e.key?n.setState({draggedThumbIndex:-1},(function(){u&&n.fireOnFinalChange()})):u&&n.fireOnFinalChange())},n.onKeyUp=function(e){var t=n.state.isChanged;n.setState({draggedThumbIndex:-1},(function(){t&&n.fireOnFinalChange()}))},n.onMove=function(e,t){var r=n.state,o=r.draggedThumbIndex,s=r.draggedTrackPos,a=n.props,i=a.direction,u=a.min,c=a.max,l=a.onChange,f=a.values,p=a.step,v=a.rtl;if(-1===o&&-1===s[0]&&-1===s[1])return null;var m=n.trackRef.current;if(!m)return null;var g=m.getBoundingClientRect(),b=(0,d.isVertical)(i)?g.height:g.width;if(-1!==s[0]&&-1!==s[1]){var k=e-s[0],O=t-s[1],T=0;switch(i){case h.Direction.Right:case h.Direction.Left:T=k/b*(c-u);break;case h.Direction.Down:case h.Direction.Up:T=O/b*(c-u);break;default:(0,d.assertUnreachable)(i)}if(v&&(T*=-1),Math.abs(T)>=p/2){for(var M=0;M<n.thumbRefs.length;M++){if(f[M]===c&&1===Math.sign(T)||f[M]===u&&-1===Math.sign(T))return;var w=f[M]+T;w>c?T=c-f[M]:w<u&&(T=u-f[M])}var x=f.slice(0);for(M=0;M<n.thumbRefs.length;M++)x=(0,d.replaceAt)(x,M,n.normalizeValue(f[M]+T,M));n.setState({draggedTrackPos:[e,t]}),l(x)}}else{var y=0;switch(i){case h.Direction.Right:y=(e-g.left)/b*(c-u)+u;break;case h.Direction.Left:y=(b-(e-g.left))/b*(c-u)+u;break;case h.Direction.Down:y=(t-g.top)/b*(c-u)+u;break;case h.Direction.Up:y=(b-(t-g.top))/b*(c-u)+u;break;default:(0,d.assertUnreachable)(i)}v&&(y=c+u-y),Math.abs(f[o]-y)>=p/2&&l((0,d.replaceAt)(f,o,n.normalizeValue(y,o)))}},n.normalizeValue=function(e,t){var r=n.props,o=r.min,s=r.max,a=r.step,i=r.allowOverlap,u=r.values;return(0,d.normalizeValue)(e,t,o,s,a,i,u)},n.onEnd=function(e){if(e.preventDefault(),document.removeEventListener("mousemove",n.schdOnMouseMove),document.removeEventListener("touchmove",n.schdOnTouchMove),document.removeEventListener("mouseup",n.schdOnEnd),document.removeEventListener("touchend",n.schdOnEnd),document.removeEventListener("touchcancel",n.schdOnEnd),-1===n.state.draggedThumbIndex&&-1===n.state.draggedTrackPos[0]&&-1===n.state.draggedTrackPos[1])return null;n.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},(function(){n.fireOnFinalChange()}))},n.fireOnFinalChange=function(){n.setState({isChanged:!1});var e=n.props,t=e.onFinalChange,r=e.values;t&&t(r)},n.updateMarkRefs=function(e){if(!e.renderMark)return n.numOfMarks=void 0,void(n.markRefs=void 0);n.numOfMarks=(e.max-e.min)/n.props.step,n.markRefs=[];for(var t=0;t<n.numOfMarks+1;t++)n.markRefs[t]=c.createRef()},n.calculateMarkOffsets=function(){if(n.props.renderMark&&n.trackRef&&n.numOfMarks&&n.markRefs&&null!==n.trackRef.current){for(var e=window.getComputedStyle(n.trackRef.current),t=parseInt(e.width,10),r=parseInt(e.height,10),o=parseInt(e.paddingLeft,10),s=parseInt(e.paddingTop,10),a=[],i=0;i<n.numOfMarks+1;i++){var u=9999,c=9999;if(n.markRefs[i].current){var d=n.markRefs[i].current.getBoundingClientRect();u=d.height,c=d.width}n.props.direction===h.Direction.Left||n.props.direction===h.Direction.Right?a.push([Math.round(t/n.numOfMarks*i+o-c/2),-Math.round((u-r)/2)]):a.push([Math.round(r/n.numOfMarks*i+s-u/2),-Math.round((c-t)/2)])}n.setState({markOffsets:a})}},0===t.step)throw new Error('"step" property should be a positive number');return n.schdOnMouseMove=(0,d.schd)(n.onMouseMove),n.schdOnTouchMove=(0,d.schd)(n.onTouchMove),n.schdOnEnd=(0,d.schd)(n.onEnd),n.thumbRefs=t.values.map((function(){return c.createRef()})),n.updateMarkRefs(t),n}return o(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.values,r=t.min,o=t.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",e.onResize)},unobserve:function(){return window.removeEventListener("resize",e.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,d.checkInitialOverlap)(this.props.values),this.props.values.forEach((function(t){return(0,d.checkBoundaries)(t,e.props.min,e.props.max)})),this.resizeObserver.observe(this.trackRef.current),(0,d.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),n.forEach((function(e){(0,d.isStepDivisible)(r,e,o)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},t.prototype.componentDidUpdate=function(e,t){var n=this.props,r=n.max,o=n.min,s=n.step,a=n.values,i=n.rtl;e.max===r&&e.min===o&&e.step===s||this.updateMarkRefs(this.props),(0,d.translateThumbs)(this.getThumbs(),this.getOffsets(),i),e.max===r&&e.min===o&&e.step===s&&t.markOffsets.length===this.state.markOffsets.length||(this.calculateMarkOffsets(),a.forEach((function(e){(0,d.isStepDivisible)(o,e,s)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})))},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},t.prototype.render=function(){var e=this,t=this.props,n=t.renderTrack,r=t.renderThumb,o=t.renderMark,s=void 0===o?function(){return null}:o,a=t.values,i=t.min,c=t.max,l=t.allowOverlap,f=t.disabled,p=this.state,v=p.draggedThumbIndex,m=p.thumbZIndexes,g=p.markOffsets;return n({props:{style:{transform:"scale(1)",cursor:v>-1?"grabbing":this.props.draggableTrack?(0,d.isVertical)(this.props.direction)?"ns-resize":"ew-resize":1!==a.length||f?"inherit":"pointer"},onMouseDown:f?d.voidFn:this.onMouseDownTrack,onTouchStart:f?d.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:f,children:u(u([],g.map((function(t,n,r){return s({props:{style:e.props.direction===h.Direction.Left||e.props.direction===h.Direction.Right?{position:"absolute",left:"".concat(t[0],"px"),marginTop:"".concat(t[1],"px")}:{position:"absolute",top:"".concat(t[0],"px"),marginLeft:"".concat(t[1],"px")},key:"mark".concat(n),ref:e.markRefs[n]},index:n})})),!0),a.map((function(t,n){var o=e.state.draggedThumbIndex===n;return r({index:n,value:t,isDragged:o,props:{style:{position:"absolute",zIndex:m[n],cursor:f?"inherit":o?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:n,tabIndex:f?void 0:0,"aria-valuemax":l?c:a[n+1]||c,"aria-valuemin":l?i:a[n-1]||i,"aria-valuenow":t,draggable:!1,ref:e.thumbRefs[n],role:"slider",onKeyDown:f?d.voidFn:e.onKeyDown,onKeyUp:f?d.voidFn:e.onKeyUp}})})),!0)})},t.defaultProps={step:1,direction:h.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},t}(c.Component);t.default=p}}]);
//# sourceMappingURL=254e907ed4935b4d197c.commons-app-Range.js.js.map