"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[187],{7736:(e,t,r)=>{var n=r(9439).forEach,a=r(9150),i=r(9795),o=r(4729),l=r(2098),s=r(6637),c=r(5173),u=r(6932),d=r(40),g=r(8064),f=r(7102);function b(e){return Array.isArray(e)||void 0!==e.length}function m(e){if(Array.isArray(e))return e;var t=[];return n(e,(function(e){t.push(e)})),t}function v(e){return e&&1===e.nodeType}function h(e,t,r){var n=e[t];return null==n&&void 0!==r?r:n}e.exports=function(e){var t;if((e=e||{}).idHandler)t={get:function(t){return e.idHandler.get(t,!0)},set:e.idHandler.set};else{var r=o(),y=l({idGenerator:r,stateHandler:d});t=y}var p=e.reporter;p||(p=s(!1===p));var A=h(e,"batchProcessor",u({reporter:p})),w={};w.callOnAdd=!!h(e,"callOnAdd",!0),w.debug=!!h(e,"debug",!1);var D,S=i(t),k=a({stateHandler:d}),O=h(e,"strategy","object"),E=h(e,"important",!1),H={reporter:p,batchProcessor:A,stateHandler:d,idHandler:t,important:E};if("scroll"===O&&(c.isLegacyOpera()?(p.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),O="object"):c.isIE(9)&&(p.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),O="object")),"scroll"===O)D=f(H);else{if("object"!==O)throw new Error("Invalid strategy name: "+O);D=g(H)}var L={};return{listenTo:function(e,r,a){function i(e){var t=S.get(e);n(t,(function(t){t(e)}))}function o(e,t,r){S.add(t,r),e&&r(t)}if(a||(a=r,r=e,e={}),!r)throw new Error("At least one element required.");if(!a)throw new Error("Listener required.");if(v(r))r=[r];else{if(!b(r))return p.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");r=m(r)}var l=0,s=h(e,"callOnAdd",w.callOnAdd),c=h(e,"onReady",(function(){})),u=h(e,"debug",w.debug);n(r,(function(e){d.getState(e)||(d.initState(e),t.set(e));var g=t.get(e);if(u&&p.log("Attaching listener to element",g,e),!k.isDetectable(e))return u&&p.log(g,"Not detectable."),k.isBusy(e)?(u&&p.log(g,"System busy making it detectable"),o(s,e,a),L[g]=L[g]||[],void L[g].push((function(){++l===r.length&&c()}))):(u&&p.log(g,"Making detectable..."),k.markBusy(e,!0),D.makeDetectable({debug:u,important:E},e,(function(e){if(u&&p.log(g,"onElementDetectable"),d.getState(e)){k.markAsDetectable(e),k.markBusy(e,!1),D.addListener(e,i),o(s,e,a);var t=d.getState(e);if(t&&t.startSize){var f=e.offsetWidth,b=e.offsetHeight;t.startSize.width===f&&t.startSize.height===b||i(e)}L[g]&&n(L[g],(function(e){e()}))}else u&&p.log(g,"Element uninstalled before being detectable.");delete L[g],++l===r.length&&c()})));u&&p.log(g,"Already detecable, adding listener."),o(s,e,a),l++})),l===r.length&&c()},removeListener:S.removeListener,removeAllListeners:S.removeAllListeners,uninstall:function(e){if(!e)return p.error("At least one element is required.");if(v(e))e=[e];else{if(!b(e))return p.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=m(e)}n(e,(function(e){S.removeAllListeners(e),D.uninstall(e),d.cleanState(e)}))},initDocument:function(e){D.initDocument&&D.initDocument(e)}}}}}]);
//# sourceMappingURL=4eb27f413ebbded8cafa.commons-app-element-resize-detector.js.js.map